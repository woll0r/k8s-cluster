---
# Configuration file for MegaLinter
# See all available variables at https://megalinter.io/configuration/ and in linters documentation

FLAVOR_SUGGESTIONS: false
APPLY_FIXES: none # all, none, or list of linter keys
# ENABLE: # If you use ENABLE variable, all other languages/formats/tooling-formats will be disabled by default
ENABLE_LINTERS: # If you use ENABLE_LINTERS variable, all other linters will be disabled by default
  - ACTION_ACTIONLINT
  - ANSIBLE_ANSIBLE_LINT
  - ENV_DOTENV_LINTER
  - JSON_JSONLINT
  - KUBERNETES_KUBEVAL
  - KUBERNETES_KUBECONFORM
  - MARKDOWN_MARKDOWNLINT
  - MARKDOWN_MARKDOWN_LINK_CHECK
  - YAML_YAMLLINT
  - SPELL_CSPELL
  - SPELL_MISSPELL

SHOW_ELAPSED_TIME: true
FILEIO_REPORTER: false
CLEAR_REPORT_FOLDER: true
# DISABLE_ERRORS: true # Uncomment if you want MegaLinter to detect errors but not block CI to pass

LINTER_RULES_PATH: .github/linters

KUBERNETES_DIRECTORY: cluster
KUBERNETES_KUBEVAL_ARGUMENTS: [--ignore-missing-schemas]
KUBERNETES_KUBECONFORM_ARGUMENTS: [--ignore-missing-schemas]

JSON_JSONLINT_FILE_EXTENSIONS: [.json, .json5]
JSON_JSONLINT_ARGUMENTS: [--mode, json5]

ANSIBLE_ANSIBLE_LINT_PRE_COMMANDS:
  - command: pip3 install --user --requirement ansible/requirements.txt
    cwd: workspace
  - command: ansible-galaxy install -r ansible/requirements.yml --roles-path ~/.ansible/roles --force
    cwd: workspace
  - command: ansible-galaxy collection install -r ansible/requirements.yml --collections-path ~/.ansible/collections --force
    cwd: workspace

SPELL_FILTER_REGEX_EXCLUDE: (ansible|cluster)/.*\.sops\.ya?ml
